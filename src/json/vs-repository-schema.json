{
  "$schema": "http://json-schema.org/draft-04/schema",
  "id": "",
  "title": "Visual Studio Repository Schema",
  "description": "JSON Schema for Visual Studio Repositories.",
  "type": "object",
  "required": [
    "title",
    "repositories"
  ],
  "properties": {

    "title": {
      "type": "string",
      "description": "A short name that describes the repository."
    },
    "description": {
      "type": "string",
      "description": "A synopsis of the purpose of the repository. The description is optional."
    },
    "author": {
      "type": "string",
      "description": "The person(s) responsible for the creation of this repository. The author is optional."
    },
    "repositories": {
      "$ref": "#/definitions/repositories"
    }
  },
  "definitions": {

    "repositories": {
      "type": "object",
      "description": "Dictionary of repository objects.",
      "additionalProperties": { "$ref": "#/definitions/repository" },
      "default": {}
    },

    "repositoryConnection": {
      "type": "object",
      "required": [ "gitUrl", "zipUrl" ],
      "properties": {
        "gitUrl": {
          "type": "string",
          "format": "uri"
        },
        "zipUrl": {
          "type": "string",
          "format": "uri"
        },
        "iconUrl": {
          "type": "string",
          "format": "uri"
        }
      }
    },
    "guid": {
      "pattern": "^{?[0-9A-Fa-f]{8}[-]?([0-9A-Fa-f]{4}[-]?){3}[0-9A-Fa-f]{12}}?$",
      "type": "string",
      "description": "A universally unique identifier (UUID) is a 128-bit number used to identify information in computer systems. The term globally unique identifier (GUID) is also used, typically in software created by Microsoft."
    },
    "repository": {
      "type": "object",
      "description": "Abstraction of a repository that points to other template-based repositories.",
      "additionalProperties": false,
      "required": [ "id", "category", "connection" ],
      "properties": {
        "id": {
          "$ref": "#/definitions/guid"
        },
        "description": {
          "type": "string",
          "description": "An brief summary of the repository. The description is optional."
        },
        "category": {
          "type": "string",
          "description": "A division of this repository regarded as having particular shared characteristics."
        },
        "connection": {
          "$ref": "#/definitions/repositoryConnection"
        },
        "replacements": {
          "$ref": "#/definitions/replacements"
        } 
      }
    },

    "replacementLocation": {
      "type": "string",
      "description": "Determines the location of the replacement",
      "enum": [
        "text",
        "directory",
        "file"
      ]
    },

    "replacements": {
      "type": "object",
      "description": "Dictionary of replacement objects.",
      "additionalProperties": { "$ref": "#/definitions/replacement" },
      "default": {}
    },

    "replacement": {
      "type": "object",
      "required": [ "value", "replaces", "location" ],
      "properties": {
        "location": {
          "$ref": "#/definitions/replacementLocation"
        },
        "value": {
          "type": "string",
          "description": "The value to be replaced."
        },
        "replaces": {
          "type": "string",
          "description": "The replacement to substitute for the value."
        }
      }
    }
  }
}
